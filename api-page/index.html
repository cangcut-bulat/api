<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="icon" href="/icon.png" type="image/png">
    <title id="page"></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <style>
        :root {
            /* Variabel Warna (Light Mode) */
            --primary: #6366f1; --primary-dark: #4f46e5; --primary-light: #818cf8; --secondary: #f472b6;
            --dark: #f8fafc; --darker: #e2e8f0; --light: #0f172a; --gray: #475569;
            --success: #10b981; --warning: #f59e0b; --danger: #ef4444; /* Warna notif error */
            --success-bg: #dcfce7; --warning-bg: #fef3c7; --danger-bg: #fee2e2; /* Background notif */
            --success-text: #065f46; --warning-text: #92400e; --danger-text: #991b1b; /* Teks notif */
            --card-bg: rgba(255, 255, 255, 0.9); /* Semi-transparent card */
            --card-hover: #f8fafc; --border-color: #e2e8f0;
            --input-bg: #ffffff; --input-border: #cbd5e1; --input-focus-bg: #ffffff; --input-focus-border: var(--primary); --input-focus-shadow: rgba(99, 102, 241, 0.2);
            /* MODIFIKASI: --pre-bg sedikit lebih gelap di light mode */
            --pre-bg: #eef2f9; 
            --pre-border: #e2e8f0; --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --header-height: 4rem; /* Tinggi header baru */
        }

        body[data-theme="dark"] {
            /* Variabel Warna (Dark Mode) */
            --dark: #000000;
            --darker: #000000;
            --light: #f8fafc; --gray: #94a3b8;
            --success: #10b981; --warning: #f59e0b; --danger: #ef4444;
            --success-bg: #052e16; --warning-bg: #422006; --danger-bg: #450a0a;
            --success-text: #6ee7b7; --warning-text: #fcd34d; --danger-text: #fca5a5;
            --card-bg: rgba(255, 255, 255, 0.05); --card-hover: rgba(255, 255, 255, 0.08); --border-color: rgba(255, 255, 255, 0.1);
            --input-bg: rgba(255, 255, 255, 0.05); --input-border: rgba(255, 255, 255, 0.2); --input-focus-bg: rgba(255, 255, 255, 0.1); --input-focus-border: var(--primary-light); --input-focus-shadow: rgba(99, 102, 241, 0.2);
            --pre-bg: rgba(0, 0, 0, 0.3); --pre-border: rgba(255, 255, 255, 0.1);
        }

        html { scroll-behavior: smooth; }
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-image: url('/images/background.jpg');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            color: var(--light);
            padding: calc(var(--header-height) + 1rem) 1rem 1rem 1rem;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent; line-height: 1.5;
            transition: background 0.3s ease, color 0.3s ease;
            position: relative;
            z-index: 1;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background-color: rgba(255, 255, 255, 0.7);
            z-index: -1;
            transition: background-color 0.3s ease;
        }

        body[data-theme="dark"] {
            background-image: none;
            background: linear-gradient(135deg, var(--darker), var(--dark));
        }
        body[data-theme="dark"]::before {
            background-color: rgba(0, 0, 0, 0);
        }

        .d-none { display: none !important; }

        /* Preloader Styles */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--dark); z-index: 9999; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.5s ease-out, visibility 0s 0.5s; visibility: visible; }
        #preloader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .loader-content { text-align: center; }
        .pulsing-logo { width: 60px; height: 60px; animation: pulse 1.5s infinite ease-in-out; margin-bottom: 1rem; border-radius: 8px; }
        .loader-content p { color: var(--primary); font-weight: 500; font-size: 1rem; animation: fadeInOut 1.5s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } }
        @keyframes fadeInOut { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

        /* MODIFIKASI: Response Text Style */
        pre, #apiResponseContent {
            white-space: pre-wrap; word-wrap: break-word; overflow-x: auto;
            background: var(--pre-bg); 
            color: var(--light); /* Menggunakan --light agar dinamis */
            padding: 1rem;
            border-radius: 8px; max-height: 400px; font-size: 0.875rem;
            font-family: 'Consolas', 'Menlo', 'Courier New', monospace;
            border: 1px solid var(--pre-border); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-weight: 600; /* Dibuat lebih tebal */
            line-height: 1.6;
        }
        /* JSON Syntax Highlighting Colors (Tetap Sama) */
        .json-key { color: #c991e1; font-weight: 700; } /* Key sedikit lebih tebal */
        .json-string { color: #86c166; }
        .json-number { color: #f59e0b; }
        .json-boolean { color: #6366f1; font-weight: 700; } /* Boolean sedikit lebih tebal */
        .json-null { color: var(--gray); font-style: italic; }

        .modal-body form label { display: block; font-weight: 500; margin-bottom: 6px; color: var(--gray); font-size: 0.9rem; }
        .modal-body form input, .modal-body form textarea { width: 100%; padding: 12px 14px; border-radius: 8px; border: 1px solid var(--input-border); background: var(--input-bg); color: var(--light); margin-bottom: 1rem; font-size: 0.95rem; font-family: inherit; transition: var(--transition); }
        .modal-body form textarea { min-height: 100px; resize: vertical; }
        .modal-body form input::placeholder, .modal-body form textarea::placeholder { color: var(--gray); opacity: 0.7; }
        .modal-body form input:focus, .modal-body form textarea:focus { outline: none; border-color: var(--input-focus-border); background: var(--input-focus-bg); box-shadow: 0 0 0 3px var(--input-focus-shadow); }

        #submitParamBtn, #submitReportBtn { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border: none; padding: 12px 24px; font-size: 0.95rem; border-radius: 8px; font-family: inherit; cursor: pointer; font-weight: 500; transition: var(--transition); width: 100%; margin-top: 0.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        #submitParamBtn:hover, #submitReportBtn:hover { background: linear-gradient(135deg, var(--primary-dark), var(--primary)); transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); }
        #submitParamBtn:active, #submitReportBtn:active { transform: translateY(0); }

        .loading-spinner { margin: 1rem auto; border: 3px solid var(--card-bg); border-top: 3px solid var(--primary-light); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .modal { position: fixed; top: 0; left: 0; z-index: 100; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; padding: 1rem; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .modal.active { opacity: 1; pointer-events: all; }
        .modal-dialog { width: 100%; max-width: 500px; background: var(--dark); border-radius: 12px; padding: 1.5rem; color: var(--light); overflow: auto; max-height: 90vh; transform: translateY(20px); transition: transform 0.3s ease, opacity 0.3s ease, background 0.3s ease; opacity: 0; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); border: 1px solid var(--border-color); }
        .modal.active .modal-dialog { transform: translateY(0); opacity: 1; }
        .modal-header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1rem; transition: border-color 0.3s ease; }
        .modal-header h5 { font-size: 1.25rem; font-weight: 600; color: var(--light); }
        .modal-header span { font-size: 0.9rem; color: var(--gray); display: block; margin-top: 4px; font-weight: 400; }
        .btn-close { background: none; border: none; font-size: 1.5rem; line-height: 1; cursor: pointer; color: var(--gray); transition: var(--transition); padding: 0.25rem; border-radius: 4px; }
        .btn-close:hover { color: var(--light); background: var(--card-hover); }

        .modal-body { padding: 0.5rem 0; }
        .copy-section { display: none; justify-content: space-between; align-items: center; background-color: var(--pre-bg); border: 1px solid var(--border-color); padding: 10px 14px; border-radius: 8px; font-size: 0.85rem; margin-bottom: 1rem; overflow: auto; transition: var(--transition); }
        .copy-section span { color: var(--gray); }
        .copy-section.active { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .copy-button { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border: none; color: white; padding: 6px 12px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 4px; font-weight: 500; font-family: inherit; }
        .copy-button:hover { background: linear-gradient(135deg, var(--primary-dark), var(--primary)); transform: translateY(-1px); }
        .copy-button:active { transform: translateY(0); }
        #copyResponseBtn { margin-bottom: 0.75rem; width: auto; padding: 6px 12px; font-size: 0.8rem; margin-left: auto; margin-right: 0; display: flex; }

        .container { max-width: 1200px; margin: 0 auto; padding: 0; }

        /* Hero Section Styles */
        .hero { text-align: center; margin: 1.5rem auto 2rem auto; max-width: 800px; padding: 0 1rem; }
        .api-platform-badge { display: inline-flex; align-items: center; gap: 0.5rem; background-color: var(--card-bg); color: var(--primary); padding: 0.4rem 0.9rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; border: 1px solid var(--border-color); margin-bottom: 1rem; transition: var(--transition); 
            /* MODIFIKASI: Tambah cursor pointer */
            cursor: pointer; 
        }
        .api-platform-badge:hover {
             background-color: var(--card-hover);
             box-shadow: 0 4px 8px rgba(0,0,0,0.1);
             transform: translateY(-2px);
        }
        body[data-theme="dark"] .api-platform-badge { color: var(--primary-light); }
        .hero-header { margin-bottom: 0.75rem; }
        .hero h2 { font-size: 2.5rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem; text-align: center; }
        body[data-theme="dark"] .hero h2 { background: linear-gradient(90deg, #a5b4fc, #818cf8, #6366f1, #818cf8, #a5b4fc); background-size: 300% 300%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: gradient 8s ease infinite; }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .hero p { font-size: 1.1rem; color: var(--gray); margin-bottom: 1.5rem; line-height: 1.6; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto; }
        .version-label { font-size: 0.8rem; font-weight: 500; color: var(--primary); background-color: var(--card-bg); padding: 3px 8px; border-radius: 6px; margin-left: 0.5rem; vertical-align: middle; border: 1px solid var(--border-color); transition: var(--transition); }
        body[data-theme="dark"] .version-label { color: var(--primary-light); }

        /* Header Atas (Top Navbar) Styles */
        .top-navbar { position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height); background: var(--darker); box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between; padding: 0 1.5rem; z-index: 50; transition: background 0.3s ease; }
        .navbar-logo { display: flex; align-items: center; flex-shrink: 0; }
        .navbar-logo img { height: 32px; width: 32px; border-radius: 4px; }
        .navbar-scrolling-text-wrapper { flex-grow: 1; overflow: hidden; margin: 0 1.5rem; display: flex; align-items: center; }
        .navbar-theme-switcher { flex-shrink: 0; }
        .scrolling-text-container { width: 100%; overflow: hidden; white-space: nowrap; line-height: normal; background: transparent; }
        .scrolling-text { display: inline-block; padding-left: 100%; animation: scroll-left 20s linear infinite, gradient-shift 10s ease infinite alternate; font-size: 1.1rem; font-weight: 500; background: linear-gradient(90deg, #ef4444, #f97316, #eab308, #84cc16, #22c55e, #14b8a6, #0ea5e9, #6366f1, #a855f7, #ec4899, #ef4444); background-size: 300% 100%; -webkit-background-clip: text; background-clip: text; color: transparent; vertical-align: middle; }
        @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        @keyframes gradient-shift { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        .theme-toggle-button { background: transparent; border: none; color: var(--gray); width: 44px; height: 44px; border-radius: 50%; font-size: 1.25rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); padding: 0; }
        .theme-toggle-button:hover { background: var(--card-hover); color: var(--primary); }
        .theme-toggle-button .fa-sun { color: #f59e0b; }
        .theme-toggle-button .fa-moon { color: #818cf8; }

        #donationQR { max-width: 180px; height: 180px; border-radius: 8px; background: white; padding: 5px; margin: 0 auto 1rem auto; display: block; cursor: zoom-in; transition: transform 0.2s ease; }
        #donationQR:hover { transform: scale(1.05); }
        .donation-controls { display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1.5rem; }
        #dontShowAgainCheckbox { width: 16px; height: 16px; accent-color: var(--primary); }
        .donation-controls label { color: var(--gray); font-size: 0.9rem; cursor: pointer; margin-bottom: 0; }

        .products-section { background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 2rem; text-align: center; margin-left: 1rem; margin-right: 1rem; }
        .products-section h2 { font-size: 1.5rem; font-weight: 600; color: var(--light); margin-bottom: 0.5rem; }
        .products-section p { color: var(--gray); margin-bottom: 1.5rem; max-width: 600px; margin-left: auto; margin-right: auto; }
        .product-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem; }
        .products-section .play-button { text-decoration: none; align-self: center; margin-top: 0; display: inline-flex; justify-content: center; flex-grow: 1; min-width: 150px; }
        .play-button.btn-secondary { background: var(--card-hover); color: var(--primary); border: 1px solid var(--primary-light); box-shadow: none; }
        .play-button.btn-secondary:hover { background: var(--primary-light); color: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2); }
        body[data-theme="dark"] .play-button.btn-secondary { color: var(--primary-light); border-color: var(--primary); }
        body[data-theme="dark"] .play-button.btn-secondary:hover { background: var(--primary); color: white; }

        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem; padding: 0 1rem; }
        .stats div { background: var(--card-bg); padding: 1.5rem 1rem; border-radius: 12px; text-align: center; transition: var(--transition); border: 1px solid var(--border-color); }
        .stats div:hover { transform: translateY(-5px); background: var(--card-hover); box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); }
        .stats h3 { font-size: 0.95rem; opacity: 0.8; color: var(--gray); margin-bottom: 0.5rem; font-weight: 500; }
        .stats p { font-size: 1.5rem; font-weight: 700; color: var(--light); }

        /* Search Input Styles */
         .content { padding: 0 1rem; }
         .search-container { margin-bottom: 1.5rem; }
         #apiSearchInput { width: 100%; padding: 12px 16px; border-radius: 8px; border: 1px solid var(--input-border); background: var(--input-bg); color: var(--light); font-size: 1rem; font-family: inherit; transition: var(--transition); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
         #apiSearchInput::placeholder { color: var(--gray); opacity: 0.7; }
         #apiSearchInput:focus { outline: none; border-color: var(--input-focus-border); background: var(--input-focus-bg); box-shadow: 0 0 0 3px var(--input-focus-shadow), 0 2px 4px rgba(0,0,0,0.05); }

        .content h2 { font-size: 1.5rem; color: var(--light); margin-bottom: 1rem; font-weight: 600; }

        .tabs { display: flex; gap: 1rem; overflow-x: auto; margin-bottom: 1.5rem; padding-bottom: 6px; scrollbar-width: none; }
        .tabs::-webkit-scrollbar { display: none; height: 0; }
        .tab { background: none; color: var(--gray); border: none; font-weight: 500; border-bottom: 2px solid transparent; padding: 0.75rem 0; cursor: pointer; font-size: 1rem; white-space: nowrap; transition: var(--transition); position: relative; font-family: inherit; }
        .tab.active { color: var(--light); border-color: var(--primary); }
        .tab:after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px; background: var(--primary); transition: var(--transition); }
        .tab:hover:not(.active):after { width: 100%; }

        .api-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; margin-bottom: 3rem; }
        .api-card { background: var(--card-bg); padding: 1.25rem; border-radius: 12px; transition: var(--transition); border: 1px solid var(--border-color); display: flex; flex-direction: column; justify-content: space-between; min-height: 180px; }
        .api-card:hover { transform: translateY(-5px); background: var(--card-hover); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); border-color: var(--border-color); }
        .api-info h3 { font-size: 1.2rem; color: var(--light); font-weight: 600; margin-bottom: 0.5rem; display: flex; align-items: center; justify-content: space-between; }
        .api-info h3 .new-label { background-color: var(--danger); color: white; font-size: 0.65rem; font-weight: 700; padding: 3px 8px; border-radius: 10px; animation: pulse-danger 1.5s infinite; }
        @keyframes pulse-danger { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }
        .api-info p { font-size: 0.95rem; color: var(--gray); margin-bottom: 1rem; line-height: 1.5; }
        .status { padding: 0.35rem 0.75rem; border-radius: 20px; font-size: 0.75rem; display: inline-block; font-weight: 500; margin-top: 0.5rem; transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; }
        .status { background: rgba(16, 185, 129, 0.15); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.3); }
        .status.warning { background: rgba(245, 158, 11, 0.15); color: var(--warning); border-color: rgba(245, 158, 11, 0.3); }
        .status.danger, .status.error { background: rgba(239, 68, 68, 0.15); color: var(--danger); border-color: rgba(239, 68, 68, 0.3); }
        body[data-theme="light"] .status { border: 1px solid transparent; }
        body[data-theme="light"] .status.warning { border: 1px solid transparent; }
        body[data-theme="light"] .status.danger, body[data-theme="light"] .status.error { border: 1px solid transparent; }

        .play-button { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border: none; border-radius: 8px; padding: 0.75rem 1.5rem; color: white; cursor: pointer; font-size: 0.95rem; font-weight: 500; text-align: center; transition: var(--transition); align-self: flex-start; margin-top: 1rem; display: flex; align-items: center; gap: 8px; font-family: inherit; }
        .play-button:hover { background: linear-gradient(135deg, var(--primary-dark), var(--primary)); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); }
        .play-button:active { transform: translateY(0); }

        .footer { text-align: center; padding: 2rem 1rem 1rem 1rem; color: var(--gray); font-size: 0.9rem; border-top: 1px solid var(--border-color); margin-top: 2rem; transition: color 0.3s ease, border-color 0.3s ease; }
        .contact { margin-top: 1rem; display: flex; justify-content: center; gap: 1rem; }
        .contact a { color: var(--gray); text-decoration: none; font-size: 1.25rem; transition: var(--transition); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: var(--card-bg); }
        .contact a:hover { color: white; background: var(--primary); transform: translateY(-3px); box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3); }
        body[data-theme="light"] .contact a:hover { color: white; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeInUp 0.6s ease forwards; }

        .qr-lightbox-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 101; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; cursor: zoom-out; }
        .qr-lightbox-overlay.active { opacity: 1; pointer-events: all; }
        #lightboxImage { max-width: 90vw; max-height: 90vh; width: auto; height: auto; background: white; padding: 10px; border-radius: 12px; cursor: default; transform: scale(0.8); transition: transform 0.3s ease; }
        .qr-lightbox-overlay.active #lightboxImage { transform: scale(1); }

        #musicFabContainer { position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 90; display: none; }
        #fabToggleBtn { width: 56px; height: 56px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border: none; color: white; font-size: 1.5rem; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: var(--transition); }
        #fabToggleBtn:hover { transform: scale(1.05); box-shadow: 0 6px 16px rgba(0,0,0,0.25); }
        #musicControlsExpanded { position: absolute; bottom: calc(100% + 0.75rem); right: 0; display: none; flex-direction: column; align-items: center; gap: 0.75rem; background: var(--card-bg); padding: 1rem; border-radius: 12px; box-shadow: 0 6px 16px rgba(0,0,0,0.2); border: 1px solid var(--border-color); transition: opacity 0.3s ease, transform 0.3s ease; opacity: 0; transform: translateY(10px); pointer-events: none; }
        #musicControlsExpanded.active { display: flex; opacity: 1; transform: translateY(0); pointer-events: auto; }
        #musicControlsExpanded button { background: none; border: none; color: var(--gray); font-size: 1.1rem; cursor: pointer; padding: 0.3rem; line-height: 1; transition: color 0.2s ease, transform 0.2s ease; }
        #musicControlsExpanded button:hover { color: var(--light); transform: scale(1.1); }
        #volumeSlider { width: 100px; height: 5px; cursor: pointer; accent-color: var(--primary); margin-top: 0.2rem; }
        #volumeSlider::-webkit-slider-thumb { appearance: none; width: 14px; height: 14px; background: var(--primary); border-radius: 50%; }
        #volumeSlider::-moz-range-thumb { width: 14px; height: 14px; background: var(--primary); border-radius: 50%; border: none; }

        #notification { position: fixed; top: 0; left: 50%; transform: translateX(-50%) translateY(-120%); min-width: 250px; max-width: 90%; padding: 0.9rem 1.5rem; border-radius: 8px; background-color: var(--card-bg); color: var(--light); text-align: center; font-size: 0.95rem; font-weight: 500; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); z-index: 1000; transition: transform 0.4s ease-in-out, background-color 0.3s ease, color 0.3s ease; border: 1px solid var(--border-color); }
        #notification.show { transform: translateX(-50%) translateY(20px); }
        #notification.error { background-color: var(--danger-bg); color: var(--danger-text); border-color: var(--danger); }
        #notification.success { background-color: var(--success-bg); color: var(--success-text); border-color: var(--success); }
        #notification.warning { background-color: var(--warning-bg); color: var(--warning-text); border-color: var(--warning); }

        /* Responsive */
        @media (max-width: 768px) {
            body { padding: calc(var(--header-height) + 0.5rem) 0.5rem 0.5rem 0.5rem; }
            .hero { padding: 0 0.5rem; }
            .products-section, .stats, .content, .footer { padding-left: 0.5rem; padding-right: 0.5rem; margin-left: 0; margin-right: 0;}
            .hero h2 { font-size: 2rem; } .hero p { font-size: 1rem; } .api-list { grid-template-columns: 1fr; } .stats { grid-template-columns: repeat(2, 1fr); }
            #musicFabContainer { bottom: 1rem; right: 1rem; }
            .top-navbar { padding: 0 1rem; }
            .navbar-scrolling-text-wrapper { margin: 0 1rem; }
        }
        @media (max-width: 480px) {
            body { padding-top: calc(var(--header-height) + 0.5rem); }
            .hero h2 { font-size: 1.75rem; }
            .api-platform-badge { font-size: 0.8rem; padding: 0.3rem 0.7rem; }
            .stats { grid-template-columns: 1fr; } .modal-dialog { padding: 1.25rem; }
            .top-navbar { padding: 0 0.5rem; }
            .navbar-logo img { height: 28px; width: 28px; }
            .navbar-scrolling-text-wrapper { margin: 0 0.5rem; }
            .scrolling-text { font-size: 0.9rem; }
            .theme-toggle-button { width: 40px; height: 40px; font-size: 1.1rem; }
            .api-list { grid-template-columns: 1fr; }
            .products-section, .stats, .content, .footer { padding-left: 0.5rem; padding-right: 0.5rem; }
            .product-buttons { flex-direction: column; }
            #musicFabContainer { bottom: 1rem; right: 1rem; }
            #musicControlsExpanded { right: 0; }
        }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="loader-content">
            <img src="/icon.png" alt="Loading..." class="pulsing-logo">
            <p>Loading API...</p>
        </div>
    </div>

    <div id="notification" class=""></div>

    <header class="top-navbar">
        <div class="navbar-logo">
            <img src="/icon.png" alt="Logo">
        </div>
        <div class="navbar-scrolling-text-wrapper">
            <div class="scrolling-text-container">
                <span class="scrolling-text">Selamat Datang di Rikishopreal Api! Semoga harimu menyenangkan!</span>
            </div>
        </div>
        <div class="navbar-theme-switcher">
            <button id="theme-toggle-btn" class="theme-toggle-button" aria-label="Toggle theme">
                </button>
        </div>
    </header>

    <div class="container">
        <section class="hero fade-in">
             <div class="api-platform-badge" id="apiPlatformBadge">
                 <i class="fa-solid fa-rocket"></i> REST API Platform
            </div>
            <div class="hero-header">
                <h2 id="apiTitle"></h2>
            </div>
            <p>Unlock the power of seamless integration with our comprehensive API suite. Access powerful endpoints with just a few clicks.</p>
        </section>

        <section class="products-section fade-in" style="animation-delay: 0.2s;">
            <h2>Jelajahi Produk Kami</h2>
            <p>Butuh script, layanan digital, atau produk premium lainnya? Kunjungi toko kami untuk melihat semua penawaran terbaik. Dapatkan solusi yang Anda butuhkan hari ini!</p>
            <div class="product-buttons">
                <button id="aboutApiBtn" class="play-button btn-secondary"> <i class="fa-solid fa-info-circle"></i> Tentang API </button>
                <a href="https://toko.rikishop.my.id" target="_blank" rel="noopener noreferrer" class="play-button"> <i class="fa-solid fa-store"></i> Kunjungi Toko </a>
                <button id="reportErrorBtn" class="play-button btn-secondary"> <i class="fa-solid fa-bug"></i> Lapor Error </button>
                <button id="requestFeatureBtn" class="play-button btn-secondary"> <i class="fa-solid fa-wand-magic-sparkles"></i> Request Fitur </button>
            </div>
        </section>

        <section class="content" id="apiContentSection">
             <div class="search-container">
                <input type="search" id="apiSearchInput" placeholder="ðŸ” Cari endpoint...">
            </div>
            <div class="tabs" id="tabs"></div>
            <div id="api-list" class="api-list"></div>
        </section>
    </div>

    <div class="modal" id="apiResponseModal"> <div class="modal-dialog"> <div class="modal-header"> <div><h5></h5><span></span></div> <button id="btn-close" class="btn-close">Ã—</button> </div> <div class="modal-body"> <div class="copy-section"> <span id="copyEndpointText"></span> <button class="copy-button"><i class="far fa-copy"></i> Copy URL</button> </div> <form id="paramForm" style="margin-bottom: 0.5rem"></form> <button id="submitParamBtn" type="button">Submit Request</button> <div id="apiResponseLoading" class="loading-spinner" style="display: none;"></div> <button id="copyResponseBtn" class="copy-button d-none"><i class="far fa-copy"></i> Copy Response</button> <pre id="apiResponseContent" class="d-none"></pre> </div> </div> </div>
    <div class="modal" id="reportModal"> <div class="modal-dialog"> <div class="modal-header"> <div><h5 id="reportModalTitle">Lapor Error</h5><span>Kirimkan laporan Anda ke NGL</span></div> <button class="btn-close report-close">Ã—</button> </div> <div class="modal-body"> <form id="reportForm"> <input type="hidden" id="reportType" value="Lapor Error"> <label for="reportName">Nama Anda</label> <input type="text" id="reportName" name="nama" placeholder="Masukkan nama Anda..." required> <label for="reportText">Isi Teks Laporan</label> <textarea id="reportText" name="teks" placeholder="Jelaskan error atau fitur yang Anda inginkan..." required></textarea> <button id="submitReportBtn" type="submit"> <i class="fa-solid fa-paper-plane"></i> Kirim Laporan </button> </form> </div> </div> </div>
    <div class="modal" id="donationModal"> <div class="modal-dialog" style="max-width: 400px; text-align: center;"> <div class="modal-header" style="border-bottom: none; padding-bottom: 0.5rem; margin-bottom: 0;"> <h5 style="width: 100%; text-align: center; margin-bottom: 0;">Support Us</h5> </div> <div class="modal-body" style="padding-top: 0;"> <p style="color: var(--gray); margin-bottom: 1.5rem; font-size: 0.95rem;">Jika Anda merasa API ini bermanfaat, pertimbangkan untuk mendukung kami.</p> <img src="/images/donasi-qr.png" alt="Donation QR Code" id="donationQR"> <div class="donation-controls"> <input type="checkbox" id="dontShowAgainCheckbox" name="dontShowAgain"> <label for="dontShowAgainCheckbox">Jangan tampilkan lagi</label> </div> <button id="continueBtn" class="play-button" style="width: 100%; margin-top: 1rem; justify-content: center;"> Lanjut ke Website </button> </div> </div> </div>
    <div class="modal" id="aboutApiModal"> <div class="modal-dialog"> <div class="modal-header"> <div> <h5 id="aboutApiModalTitle">Tentang API Ini</h5> <span id="aboutApiCreator">Dibuat oleh ...</span> </div> <button class="btn-close about-close">Ã—</button> </div> <div class="modal-body" style="font-size: 0.95rem; line-height: 1.6; color: var(--gray);"> <p style="margin-bottom: 1rem;">Selamat datang di <strong id="aboutApiName" style="color: var(--light);">...</strong>!</p> <p style="margin-bottom: 1rem;">API ini adalah layanan RESTful yang dirancang untuk menyediakan berbagai endpoint yang bermanfaat, mulai dari alat bantu AI, downloader, kuis game, pencarian, dan banyak lagi.</p> <p style="margin-bottom: 1rem;"> <strong>Tujuan Kami:</strong><br> Menyediakan akses yang mudah, cepat, dan stabil ke berbagai layanan digital melalui antarmuka API yang sederhana. </p> <p> Gunakan tombol <i class="fa-solid fa-play"></i> <strong>Try it now</strong> pada setiap endpoint untuk menguji coba secara langsung. Jika Anda menemukan bug atau memiliki ide untuk fitur baru, jangan ragu untuk menggunakan tombol "Lapor Error" or "Request Fitur". </p> <br> <p>Terima kasih telah menggunakan layanan kami!</p> </div> </div> </div>
    <div id="qrLightbox" class="qr-lightbox-overlay"> <img src="" alt="Zoomed QR Code" id="lightboxImage"> </div>
    <audio id="backgroundMusic" loop> <source src="/images/music.mp3" type="audio/mpeg"> Your browser does not support the audio element. </audio>
    <div id="musicFabContainer" class="d-none"> <div id="musicControlsExpanded"> <button id="playPauseBtn" title="Play/Pause"><i class="fas fa-pause"></i></button> <button id="muteBtn" title="Mute/Unmute"><i class="fas fa-volume-up"></i></button> <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" title="Volume"> </div> <button id="fabToggleBtn" title="Music Controls"><i class="fas fa-plus"></i></button> </div>
    <footer class="footer"> <div id="credits"></div> <div class="contact"> <a id="githubLink" target="_blank" title="GitHub"><i class="fab fa-github"></i></a> <a id="whatsappLink" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a> <a id="youtubeLink" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a> </div> </footer>

    <script>
        // --- NGL Configuration (URL Baru) ---
        const nglProxyUrl = "https://api.siputzx.my.id/api/tools/ngl?link=https%3A%2F%2Fngl.link%2Frikishop";
        // --- Global Status Variable ---
        let endpointStatuses = {};
        // --- JSON Syntax Highlighter ---
        function highlightJSON(json) { if (typeof json != 'string') { json = JSON.stringify(json, undefined, 2); } json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) { let cls = 'json-number'; if (/^"/.test(match)) { cls = /:$/.test(match) ? 'json-key' : 'json-string'; } else if (/true|false/.test(match)) { cls = 'json-boolean'; } else if (/null/.test(match)) { cls = 'json-null'; } return '<span class="' + cls + '">' + match + '</span>'; }); }
        // --- Notification Function ---
        let notificationTimeout; function showNotification(message, type = 'info') { const n = document.getElementById('notification'); if (!n) return; clearTimeout(notificationTimeout); n.textContent = message; n.className = 'notification'; if (type) n.classList.add(type); n.classList.add('show'); notificationTimeout = setTimeout(() => { n.classList.remove('show'); }, 3000); }
        // --- Copy-to-Clipboard Function ---
        function copyToClipboard(textToCopy, buttonElement, successMessage = "Copied!", isCopyUrl = false) { const original = isCopyUrl ? '<i class="far fa-copy"></i> Copy URL' : '<i class="far fa-copy"></i> Copy Response'; const showFeedback = (s) => { buttonElement.innerHTML = s ? `<i class="fas fa-check"></i> ${successMessage}` : `<i class="fas fa-times"></i> Copy Failed`; showNotification(s ? successMessage : "Gagal menyalin!", s ? 'success' : 'error'); setTimeout(() => { buttonElement.innerHTML = original; }, 2000); }; if (navigator.clipboard && window.isSecureContext) { navigator.clipboard.writeText(textToCopy).then(() => showFeedback(true)).catch(err => { console.error("Modern copy failed:", err); fallback(); }); } else { console.warn("Using fallback copy method."); fallback(); } function fallback() { try { const ta = document.createElement("textarea"); ta.value = textToCopy; Object.assign(ta.style, { position: "fixed", top: "-9999px", left: "-9999px", width: "1px", height: "1px", opacity: "0" }); document.body.appendChild(ta); ta.focus(); ta.select(); const ok = document.execCommand('copy'); document.body.removeChild(ta); showFeedback(ok); } catch (err) { console.error("Fallback copy failed:", err); showFeedback(false); } } }
        // --- Function to update status from backend ---
        async function updateStatuses() { try { const r = await fetch('/api/endpoint-status'); if (!r.ok) return; const d = await r.json(); if (d && d.data) { endpointStatuses = d.data; for (const p in endpointStatuses) { const s = endpointStatuses[p]; const span = document.querySelector(`.status[data-path="${p}"]`); if (span && span.textContent !== s) { span.textContent = s; span.className = 'status'; if (s.toLowerCase().includes("error") || s.toLowerCase().includes("danger")) span.classList.add('danger'); else if (s.toLowerCase().includes("warning") || s.toLowerCase().includes("beta")) span.classList.add('warning'); } } } } catch (e) { console.warn("Could not poll status:", e); } }
        // --- Function to start polling ---
        function startStatusPolling() { updateStatuses(); setInterval(updateStatuses, 30000); }

        // --- Fungsi Filter API Cards ---
        function filterApiCards() {
            const searchInput = document.getElementById('apiSearchInput');
            const apiListContainer = document.getElementById('api-list');
            if (!searchInput || !apiListContainer) return;
            const searchTerm = searchInput.value.toLowerCase().trim();
            const cards = apiListContainer.querySelectorAll('.api-card');
            let visibleCount = 0;
            cards.forEach(card => {
                const titleElement = card.querySelector('.api-info h3');
                const descElement = card.querySelector('.api-info p');
                const titleText = titleElement ? titleElement.textContent.toLowerCase().replace('new', '').trim() : '';
                const descText = descElement ? descElement.textContent.toLowerCase() : '';
                const isMatch = searchTerm === '' || titleText.includes(searchTerm) || descText.includes(searchTerm);
                card.style.display = isMatch ? 'flex' : 'none';
                if(isMatch) visibleCount++;
            });
            // Tampilkan pesan jika tidak ada hasil
             const noResultsMsg = document.getElementById('noResultsMessage');
             if (visibleCount === 0 && searchTerm !== '') {
                 if (!noResultsMsg) {
                     const msg = document.createElement('p');
                     msg.id = 'noResultsMessage';
                     msg.textContent = 'Endpoint tidak ditemukan.';
                     msg.style.textAlign = 'center';
                     msg.style.color = 'var(--gray)';
                     msg.style.marginTop = '1.5rem';
                     apiListContainer.appendChild(msg);
                 }
             } else if (noResultsMsg) {
                 noResultsMsg.remove();
             }
        }


        document.addEventListener("DOMContentLoaded", async () => {
             // Preloader Logic
             const preloader = document.getElementById('preloader'); if (preloader) { setTimeout(() => { preloader.classList.add('hidden'); }, 200); }

            // Theme Switcher Logic
            const themeToggleBtn = document.getElementById("theme-toggle-btn"); const body = document.body; function applyTheme(t) { body.setAttribute("data-theme", t); localStorage.setItem("theme", t); if (themeToggleBtn) themeToggleBtn.innerHTML = t === "dark" ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>'; } if (themeToggleBtn) themeToggleBtn.addEventListener("click", () => applyTheme(body.getAttribute("data-theme") === "dark" ? "light" : "dark")); const savedTheme = localStorage.getItem("theme"); const prefersDark = window.matchMedia?.('(prefers-color-scheme: dark)').matches; applyTheme(savedTheme || (prefersDark ? "dark" : "light"));

            // Donation Modal & Music Logic (Sama seperti sebelumnya)
            const donationModal = document.getElementById("donationModal"); const continueBtn = document.getElementById("continueBtn"); const dontShowCheckbox = document.getElementById("dontShowAgainCheckbox"); const hideDonation = localStorage.getItem("hideDonationModal"); const bgMusic = document.getElementById('backgroundMusic'); const musicFab = document.getElementById('musicFabContainer'); const fabToggle = document.getElementById('fabToggleBtn'); const musicControls = document.getElementById('musicControlsExpanded'); const playPause = document.getElementById('playPauseBtn'); const muteBtn = document.getElementById('muteBtn'); const volume = document.getElementById('volumeSlider'); let musicStarted = false; const tryStartMusic = () => { if (bgMusic && !musicStarted) { bgMusic.play().then(() => { if(playPause) playPause.innerHTML = '<i class="fas fa-pause"></i>'; if(musicFab) musicFab.classList.remove('d-none'); musicStarted = true; }).catch(e => { console.warn("Autoplay fail:", e); if(playPause) playPause.innerHTML = '<i class="fas fa-play"></i>'; if(musicFab) musicFab.classList.remove('d-none'); musicStarted = true; }); } }; if (!hideDonation && donationModal) setTimeout(() => donationModal.classList.add("active"), 500); else tryStartMusic(); if (continueBtn && donationModal) continueBtn.addEventListener("click", () => { if (dontShowCheckbox?.checked) localStorage.setItem("hideDonationModal", "true"); donationModal.classList.remove("active"); tryStartMusic(); }); if (fabToggle && musicControls) fabToggle.addEventListener('click', () => { const exp = musicControls.classList.toggle('active'); fabToggle.innerHTML = exp ? '<i class="fas fa-times"></i>' : '<i class="fas fa-plus"></i>'; }); if (playPause && bgMusic) { playPause.addEventListener('click', () => { if (bgMusic.paused) { bgMusic.play().catch(e=>console.error(e)); playPause.innerHTML = '<i class="fas fa-pause"></i>'; } else { bgMusic.pause(); playPause.innerHTML = '<i class="fas fa-play"></i>'; } }); bgMusic.addEventListener('ended', () => { if(playPause) playPause.innerHTML = '<i class="fas fa-play"></i>'; }); } if (muteBtn && bgMusic) muteBtn.addEventListener('click', () => { bgMusic.muted = !bgMusic.muted; muteBtn.innerHTML = bgMusic.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>'; }); if (volume && bgMusic) { volume.value = bgMusic.volume; volume.addEventListener('input', (e) => { bgMusic.volume = parseFloat(e.target.value); if (bgMusic.volume === 0 && !bgMusic.muted) { bgMusic.muted = true; if(muteBtn) muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>'; } else if (bgMusic.volume > 0 && bgMusic.muted) { bgMusic.muted = false; if(muteBtn) muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>'; } }); }

            // QR Lightbox (Sama seperti sebelumnya)
            const qrImg = document.getElementById("donationQR"); const qrBox = document.getElementById("qrLightbox"); const lightImg = document.getElementById("lightboxImage"); if (qrImg && qrBox && lightImg) { qrImg.addEventListener("click", () => { lightImg.src = qrImg.src; qrBox.classList.add("active"); }); qrBox.addEventListener("click", (e) => { if (e.target === qrBox) qrBox.classList.remove("active"); }); }

            // Core API Logic
            const tabsContainer = document.getElementById("tabs"); const apiList = document.getElementById("api-list"); let currentEndpointPath = ""; let currentEndpointRequiresApiKey = false; let settings = {}; try { settings = await fetch("/settings.json").then(res => res.json()); } catch (e) { console.error("Gagal load settings:", e); showNotification("Gagal load config!", "error"); return; } const apis = settings.endpoints || {};
            const apiTitleEl = document.getElementById("apiTitle"); if (apiTitleEl) apiTitleEl.innerHTML = `${settings.apititle || "API"} <span class="version-label">v1.1.1</span>`;
            const setContent = (id, prop, val) => { const el = document.getElementById(id); if (el) el[prop] = val; }; setContent("page", "textContent", settings.pagetitle || "Docs"); setContent("credits", "textContent", `Â© ${new Date().getFullYear()} By ${settings.creator || "Dev"}`); const gh = document.getElementById("githubLink"); if(gh) gh.href = settings.github || "#"; const wa = document.getElementById("whatsappLink"); if(wa) wa.href = settings.whatsapp || "#"; const yt = document.getElementById("youtubeLink"); if(yt) yt.href = settings.youtube || "#"; setContent("aboutApiName", "textContent", settings.apititle || "API"); setContent("aboutApiCreator", "textContent", "By " + (settings.creator || "Dev"));

            // --- Logika Render Tab & API ---
            if (tabsContainer && Object.keys(apis).length > 0) {
                 const allButton = document.createElement("button"); allButton.className = "tab active"; allButton.dataset.tab = "all"; allButton.innerText = "All"; tabsContainer.appendChild(allButton);
                 Object.keys(apis).forEach((key) => { const button = document.createElement("button"); button.className = "tab"; button.dataset.tab = key; button.innerText = key.charAt(0).toUpperCase() + key.slice(1); tabsContainer.appendChild(button); });
                 renderAPIs("all");
                 filterApiCards();
            } else if (apiList) { apiList.innerHTML = "<p style='color: var(--gray); text-align: center;'>Endpoints not found.</p>"; }

            function renderAPIs(category) {
                if (!apiList) return; apiList.innerHTML = ""; let endpointsToRender = [];
                if (category === 'all') { endpointsToRender = Object.values(apis).flat(); } 
                else if (apis[category]) { endpointsToRender = apis[category]; } 
                else { apiList.innerHTML = "<p style='color: var(--gray); text-align: center;'>Kategori tdk ditemukan.</p>"; return; }
                if (endpointsToRender.length === 0) { apiList.innerHTML = "<p style='color: var(--gray); text-align: center;'>Tdk ada endpoint.</p>"; return; }
                endpointsToRender.forEach((api, i) => {
                    if (!api?.path) return; const card = document.createElement("div"); card.className = "api-card fade-in"; card.style.animationDelay = `${i * 0.05}s`; let isNew = false; if (api.dateAdded) { try { if ((new Date().getTime() - new Date(api.dateAdded).getTime()) / 3600000 <= 24) isNew = true; } catch (e) {} } const newLabel = isNew ? '<span class="new-label">NEW</span>' : ''; const basePath = api.path.split('?')[0]; const liveStatus = endpointStatuses[basePath] || api.status || 'Active'; let sC = ""; if (liveStatus.toLowerCase().includes("error") || liveStatus.toLowerCase().includes("danger")) sC = "danger"; else if (liveStatus.toLowerCase().includes("warning") || liveStatus.toLowerCase().includes("beta")) sC = "warning"; card.innerHTML = `<div class="api-info"> <h3>${api.name || 'API'} ${newLabel}</h3> <p>${api.desc || ''}</p> <span class="status ${sC}" data-path="${basePath}">${liveStatus}</span> </div> <button class="play-button" data-endpoint="${api.path}" data-api="${api.name || 'API'}" data-desc="${api.desc || ''}"> <i class="fa-solid fa-play"></i> Try it now </button>`; apiList.appendChild(card);
                });
                filterApiCards(); // Filter setelah render
            }
            // --- Akhir Logika Render ---

            // Event Listener Utama (Sama seperti sebelumnya)
            document.addEventListener("click", (e) => {
              const playBtn = e.target.closest(".play-button:not(.btn-secondary):not(#continueBtn)"); const copyUrlBtn = e.target.closest(".copy-button:not(#copyResponseBtn)");
              if (playBtn) {
                const endpoint = playBtn.getAttribute("data-endpoint"); const api = playBtn.getAttribute("data-api"); const desc = playBtn.getAttribute("data-desc"); const form = document.getElementById("paramForm"); const submit = document.getElementById("submitParamBtn"); const modal = document.getElementById("apiResponseModal"); const copyResp = document.getElementById("copyResponseBtn"); const respEl = document.getElementById("apiResponseContent"); const loadEl = document.getElementById("apiResponseLoading");
                if (!form || !submit || !modal || !copyResp || !respEl || !loadEl) return;
                respEl.textContent = ""; respEl.classList.add("d-none"); loadEl.style.display = "none"; form.innerHTML = ""; submit.style.display = "none"; copyResp.classList.add("d-none"); form.style.display = "block";
                currentEndpointPath = endpoint; currentEndpointRequiresApiKey = endpoint.includes("apikey="); const mT = modal.querySelector(".modal-dialog h5"); if (mT) mT.innerText = api; const mD = modal.querySelector(".modal-dialog span"); if(mD) mD.innerText = desc;
                const copySect = modal.querySelector(".copy-section"); const copyTxt = document.getElementById("copyEndpointText"); let dispUrl = endpoint.split('?')[0]; const hasQ = endpoint.includes("?"); const copyP = []; let hasKey = false;
                if (hasQ) { const qP = endpoint.split("?")[1].split("&"); qP.forEach(p => { const [k, v] = p.split("="); if (!k) return; const l = k.charAt(0).toUpperCase() + k.slice(1); const isAK = k.toLowerCase() === 'apikey'; if (isAK) hasKey = true; form.innerHTML += `<label for="${k}">${l}</label><input type="text" id="${k}" name="${k}" value="${v || ""}" placeholder="Enter ${k}..." required />`; if (!isAK) copyP.push(`${k}=`); }); if (form.innerHTML !== "") { submit.textContent = "Submit Request"; submit.style.display = "block"; } } else { submit.textContent = "Try it now"; submit.style.display = "block"; }
                if (copyP.length > 0) dispUrl += "?" + copyP.join('&'); if (currentEndpointRequiresApiKey && !hasKey) dispUrl += (copyP.length > 0 ? '&' : '?') + 'apikey=';
                if(copyTxt) copyTxt.innerText = window.location.origin + dispUrl; if(copySect) copySect.classList.add("active"); modal.classList.add("active");
              }
              if (copyUrlBtn) { const txt = document.getElementById("copyEndpointText")?.innerText; if(txt) copyToClipboard(txt, copyUrlBtn, "URL Copied!", true); }
            });

            // Submit Params & Fetch API (Sama seperti sebelumnya)
            function submitParams() { const form = document.getElementById("paramForm"); if(!form) return; const keyInput = form.querySelector('#apikey'); if (currentEndpointRequiresApiKey && keyInput && !keyInput.value.trim()) { showNotification("API Key required!", 'error'); return; } if (form.innerHTML.trim() !== "" && !form.checkValidity()) { form.reportValidity(); return; } form.style.display = "none"; const submitBtn = document.getElementById("submitParamBtn"); if(submitBtn) submitBtn.style.display = "none"; const respEl = document.getElementById("apiResponseContent"); if(respEl) {respEl.textContent = ""; respEl.classList.add("d-none");} const copyBtn = document.getElementById("copyResponseBtn"); if(copyBtn) copyBtn.classList.add("d-none"); const loadEl = document.getElementById("apiResponseLoading"); if(loadEl) loadEl.style.display = "block"; let finalURL; if (form.innerHTML.trim() !== "") { const inputs = form.querySelectorAll("input"); const query = Array.from(inputs).map(i => `${i.name}=${encodeURIComponent(i.value)}`).join("&"); const path = currentEndpointPath.split("?")[0]; finalURL = `${path}?${query}`; } else { finalURL = currentEndpointPath; } console.log("Fetching:", finalURL); fetchAPI(finalURL); }
            const submitParamBtn = document.getElementById("submitParamBtn"); if (submitParamBtn) submitParamBtn.addEventListener("click", submitParams);
            function fetchAPI(url) { const fullURL = url.startsWith('/') ? window.location.origin + url : url; const respEl = document.getElementById("apiResponseContent"); const loadEl = document.getElementById("apiResponseLoading"); const urlsSect = document.querySelector("#apiResponseModal .copy-section"); const modal = document.getElementById("apiResponseModal"); const copyRespBtn = document.getElementById("copyResponseBtn"); if (!modal || !respEl || !loadEl || !copyRespBtn) return; if (!modal.classList.contains('active')) modal.classList.add("active"); loadEl.style.display = "block"; respEl.classList.add("d-none"); copyRespBtn.classList.add("d-none"); respEl.innerHTML = ""; const copyTxtEl = document.getElementById("copyEndpointText"); if (urlsSect?.classList.contains('active') && copyTxtEl) copyTxtEl.innerText = fullURL; fetch(fullURL).then(async res => { loadEl.style.display = "none"; let hasContent = false; const cType = res.headers.get("content-type"); if (!res.ok) { let eBody = `HTTP error! Status: ${res.status}`; try { const eTxt = await res.text(); try { eBody = JSON.stringify(JSON.parse(eTxt), null, 2); } catch { eBody = eTxt; } } catch {} throw new Error(eBody); } if (cType?.includes("application/json")) { const data = await res.json(); respEl.innerHTML = highlightJSON(data); hasContent = true; } else if (cType?.startsWith("image/")) { const blob = await res.blob(); const imgUrl = URL.createObjectURL(blob); respEl.innerHTML = `<img src="${imgUrl}" alt="API Response" style="max-width:100%;max-height:300px;border-radius:4px;" />`; hasContent = true; } else { try { const text = await res.text(); try { respEl.innerHTML = highlightJSON(JSON.parse(text)); hasContent = true; } catch { respEl.textContent = text.substring(0, 1000); if(text.trim()) hasContent = true; } } catch (e) { respEl.textContent = "Error reading response: " + e.message; hasContent = true; } } respEl.classList.remove("d-none"); if(hasContent) { copyRespBtn.classList.remove("d-none"); copyRespBtn.innerHTML = '<i class="far fa-copy"></i> Copy Response'; } }).catch(err => { loadEl.style.display = "none"; respEl.classList.remove("d-none"); const msg = err.message || "Request failed"; respEl.textContent = "Fetch Error:\n" + msg; copyRespBtn.classList.remove("d-none"); copyRespBtn.innerHTML = '<i class="far fa-copy"></i> Copy Response'; showNotification("Request Failed: " + msg.substring(0, 100), 'error'); console.error("Fetch Error:", err); }); }

            // Close Modal Logic (Sama seperti sebelumnya)
            const closeBtn = document.getElementById("btn-close"); if (closeBtn) { closeBtn.addEventListener("click", () => { const modal = document.getElementById("apiResponseModal"); const uSect = modal?.querySelector(".copy-section"); const cBtn = document.getElementById("copyResponseBtn"); if(modal) modal.classList.remove("active"); const rEl = document.getElementById("apiResponseContent"); if(rEl){rEl.classList.add("d-none"); rEl.textContent = "";} const pForm = document.getElementById("paramForm"); if(pForm) pForm.style.display = "block"; const sBtn = document.getElementById("submitParamBtn"); if(sBtn) sBtn.style.display = "none"; if(uSect) uSect.classList.remove("active"); if(cBtn) cBtn.classList.add("d-none"); const lEl = document.getElementById("apiResponseLoading"); if(lEl) lEl.style.display = "none"; }); }
            if(tabsContainer) tabsContainer.addEventListener("click", (e) => { if (e.target.classList.contains("tab")) { document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active")); e.target.classList.add("active"); renderAPIs(e.target.dataset.tab); } });
            const apiRespModal = document.getElementById("apiResponseModal"); if(apiRespModal) apiRespModal.addEventListener("click", (e) => { if (e.target === apiRespModal && closeBtn) closeBtn.click(); });
            const copyResponseBtn = document.getElementById("copyResponseBtn"); if (copyResponseBtn) { copyResponseBtn.addEventListener("click", () => { const rEl = document.getElementById("apiResponseContent"); if(!rEl) return; let txt = ""; let fb = "Response Copied!"; const img = rEl.querySelector('img'); if (img) { txt = img.src; fb = "Image URL Copied!"; } else { txt = rEl.textContent; } if (txt) copyToClipboard(txt, copyResponseBtn, fb, false); }); }

            // Report & About Modals (Sama, URL NGL sudah diperbarui di awal)
            const reportModal = document.getElementById("reportModal"); const reportForm = document.getElementById("reportForm"); const aboutApiModal = document.getElementById("aboutApiModal"); const aboutApiBtn = document.getElementById("aboutApiBtn");
            function openModal(modalId, title = null, typeVal = null) { const m = document.getElementById(modalId); if(!m) return; if(title && typeVal) { const mTitle = document.getElementById("reportModalTitle"); if(mTitle) mTitle.textContent = title; const rType = document.getElementById("reportType"); if(rType) rType.value = typeVal; if(reportForm) reportForm.reset(); } m.classList.add("active"); }
            function closeModalOnClick(m, sel) { if(!m) return; document.querySelectorAll(sel).forEach(b => b.addEventListener("click", () => m.classList.remove("active"))); m.addEventListener("click", (e) => { if (e.target === m) m.classList.remove("active"); }); }
            const rErrBtn = document.getElementById("reportErrorBtn"); if(rErrBtn) rErrBtn.addEventListener("click", () => openModal("reportModal", "Lapor Error", "Lapor Error")); const reqFeatBtn = document.getElementById("requestFeatureBtn"); if(reqFeatBtn) reqFeatBtn.addEventListener("click", () => openModal("reportModal", "Request Fitur", "Request Fitur")); if(aboutApiBtn) aboutApiBtn.addEventListener("click", () => openModal("aboutApiModal"));
            closeModalOnClick(reportModal, ".report-close"); closeModalOnClick(aboutApiModal, ".about-close");
            if (reportForm) reportForm.addEventListener("submit", async (e) => { e.preventDefault(); const rType = document.getElementById("reportType")?.value; const rName = document.getElementById("reportName")?.value; const rText = document.getElementById("reportText")?.value; const sBtn = document.getElementById("submitReportBtn"); if(!rType || !rName || !rText || !sBtn) return; const msg = `===== ${rType} =====\nðŸ‘¤ Nama: ${rName}\nðŸ“ Teks: ${rText}\n======================`.trim(); sBtn.disabled = true; sBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Mengirim...'; const url = `${nglProxyUrl}&text=${encodeURIComponent(msg)}`; try { const resp = await fetch(url, { method: 'GET' }); if (!resp.ok) throw new Error(`Status: ${resp.status}`); console.log("NGL Resp:", await resp.json()); showNotification("Laporan terkirim!", 'success'); if(reportModal) reportModal.classList.remove("active"); } catch (err) { console.error("NGL Error:", err); showNotification("Gagal kirim laporan.", 'error'); } finally { sBtn.disabled = false; sBtn.innerHTML = '<i class="fa-solid fa-paper-plane"></i> Kirim Laporan'; } });

            // Event listener untuk search input
             const searchInput = document.getElementById('apiSearchInput');
             if (searchInput) {
                 searchInput.addEventListener('input', filterApiCards);
             }

             // MODIFIKASI: Event listener untuk scroll badge
             const platformBadge = document.getElementById('apiPlatformBadge');
             const contentSection = document.getElementById('apiContentSection');
             if (platformBadge && contentSection) {
                 platformBadge.addEventListener('click', () => {
                     contentSection.scrollIntoView({ behavior: 'smooth' });
                 });
             }

            startStatusPolling(); // Start status polling
        }); // End DOMContentLoaded
    </script>
</body>
</html>
